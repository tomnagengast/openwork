Notes / tips

- Claude Agent SDK docs:
  - Session management + `resume`: see Claude docs “Session Management”.
  - Permissions: `canUseTool` callback is the simplest place to implement approvals.
- Keep the adapter “renderer-agnostic”: emit `{ type: 'token', messageId, token }` so the existing `ElectronIPCTransport` path works.
- For the approval modal: include tool name + small JSON preview (truncate long strings).
- Persist `claudeSessionId` into thread metadata in the DB so sessions survive restarts.

---

Orchestrator review notes (2026-01-18)

- `npm run typecheck` passes.
- `npm run lint` currently fails repo-wide (114 errors, mostly in `src/renderer/...`). The Claude SDK changes themselves lint cleanly (e.g. `src/main/agent/runtimes/claude-sdk.ts`).
- Core task requirements appear implemented: dependency added, runtime event typing extended, `claude-sdk` adapter + factory wiring, and `OPENWORK_AGENT_RUNTIME` dev selection.
